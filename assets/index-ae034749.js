import{r as c,ad as E,aB as N,C as P,L as M,k as _,a$ as L,j as e,b0 as H,a0 as v,b1 as D,Q as g,a as y,aZ as I,a_ as z,c as A,F as R,b2 as S,b3 as O,T as V,f as F}from"./index-767cdb83.js";import{a as T,b as B,H as $,E as G}from"./index-58f6093d.js";import{T as U}from"./index-143541c6.js";import{s as X}from"./postRequest-c14e9420.js";import{S as j,g as q}from"./tagRequest-33135ac1.js";const{Option:C}=j;function k(t){return t&&t.type&&(t.type.isSelectOption||t.type.isSelectOptGroup)}const J=(t,l)=>{const{prefixCls:s,className:a,popupClassName:n,dropdownClassName:f,children:p,dataSource:o}=t,r=E(p);let i;r.length===1&&N(r[0])&&!k(r[0])&&([i]=r);const d=i?()=>i:void 0;let m;r.length&&k(r[0])?m=p:m=o?o.map(h=>{if(N(h))return h;switch(typeof h){case"string":return c.createElement(C,{key:h,value:h},h);case"object":{const{value:w}=h;return c.createElement(C,{key:w,value:w},h.text)}default:return}}):[];const{getPrefixCls:u}=c.useContext(P),x=u("select",s);return c.createElement(j,Object.assign({ref:l,suffixIcon:null},M(t,["dataSource","dropdownClassName"]),{prefixCls:x,popupClassName:n||f,className:_(`${x}-auto-complete`,a),mode:j.SECRET_COMBOBOX_MODE_DO_NOT_USE},{getInputElement:d}),m)},b=c.forwardRef(J),Q=L(b);b.Option=C;b._InternalPanelDoNotUseOrYouWillBeFired=Q;const W=b,Y=({post:t,isOpen:l,onCancel:s})=>e.jsx(e.Fragment,{children:e.jsxs(H,{open:l,onCancel:s,title:t.title,footer:[e.jsx("button",{children:e.jsxs(v,{to:`/post/${t._id}`,className:"flex items-center gap-2 button-normal",children:[e.jsx("span",{children:"Đọc bài này"})," ",e.jsx(D,{})]})},"read-btn")],children:[e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx(T,{date:t.createdAt,hasTime:!0}),e.jsx(B,{post:t})]}),e.jsx("p",{className:"mb-2 text-sm italic text-black whitespace-normal line-clamp-3",children:t.shortDesc}),e.jsx("div",{className:"line-clamp-6",children:$(t.content,{replace:a=>{if(a instanceof G&&a.attribs.src)return e.jsx(e.Fragment,{})}})})]})}),re=({post:t})=>{const[l,s]=c.useState(!1),a=()=>{s(!l)};return e.jsxs("div",{className:"md:h-60",children:[e.jsxs("div",{onClick:a,className:"flex flex-col h-full bg-white border border-gray-200 rounded-lg shadow cursor-pointer md:flex-row md:max-w-xl hover:bg-gray-100 dark:border-gray-700 dark:bg-gray-800 dark:hover:bg-gray-700",children:[e.jsx("img",{loading:"lazy",className:"object-cover object-top w-full rounded-t-lg h-60 md:h-full md:w-48 md:rounded-none md:rounded-l-lg",alt:"post avatar",src:t.img_path,onError:({currentTarget:n})=>{n.onerror=null,n.src="/assets/imgs/image_null.png"}}),e.jsxs("div",{className:"flex flex-col justify-between flex-1 p-4 text-xs leading-normal",children:[e.jsxs("div",{className:"mb-2",children:[e.jsx("h5",{className:"mb-2 text-xl font-bold tracking-tight text-gray-900 dark:text-white line-clamp-2",children:t.title}),e.jsx("div",{className:"mb-3 font-normal text-gray-700 dark:text-gray-400 line-clamp-3",children:e.jsx(U,{tags:t.tags})})]}),e.jsxs("div",{className:"flex flex-col gap-1 text-normal",children:[e.jsx(B,{post:t}),e.jsx(T,{date:t.createdAt})]})]})]}),e.jsx(Y,{post:t,isOpen:l,onCancel:a},t._id)]})};function Z(t){return g({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M10 18a7.952 7.952 0 0 0 4.897-1.688l4.396 4.396 1.414-1.414-4.396-4.396A7.952 7.952 0 0 0 18 10c0-4.411-3.589-8-8-8s-8 3.589-8 8 3.589 8 8 8zm0-14c3.309 0 6 2.691 6 6s-2.691 6-6 6-6-2.691-6-6 2.691-6 6-6z"}}]})(t)}function K(t){return g({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M8.073 12.194 4.212 8.333c-1.52 1.657-2.096 3.317-2.106 3.351L2 12l.105.316C2.127 12.383 4.421 19 12.054 19c.929 0 1.775-.102 2.552-.273l-2.746-2.746a3.987 3.987 0 0 1-3.787-3.787zM12.054 5c-1.855 0-3.375.404-4.642.998L3.707 2.293 2.293 3.707l18 18 1.414-1.414-3.298-3.298c2.638-1.953 3.579-4.637 3.593-4.679l.105-.316-.105-.316C21.98 11.617 19.687 5 12.054 5zm1.906 7.546c.187-.677.028-1.439-.492-1.96s-1.283-.679-1.96-.492L10 8.586A3.955 3.955 0 0 1 12.054 8c2.206 0 4 1.794 4 4a3.94 3.94 0 0 1-.587 2.053l-1.507-1.507z"}}]})(t)}function ce(t){return g({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M18.002 2.997H5.999A3.011 3.011 0 0 0 2.997 6v12.002a3.012 3.012 0 0 0 3.002 3.001h12.003a3.012 3.012 0 0 0 3.001-3.001V6a3.012 3.012 0 0 0-3.001-3.003zm-1.64 12.647c-.152.36-.389.68-.693.927a3.594 3.594 0 0 1-1.206.614c-.49.151-1.074.229-1.75.229H7.888V6.909h5.103c.943 0 1.7.213 2.267.646.569.436.854 1.082.854 1.958 0 .528-.13.983-.389 1.357-.259.373-.63.664-1.111.868v.034c.642.135 1.137.438 1.464.912.327.473.493 1.069.493 1.789 0 .405-.078.788-.225 1.147l.02.021v.003zm-2.084-2.589c-.309-.282-.739-.419-1.297-.419H9.737v3.276h3.253c.554 0 .991-.144 1.298-.435.308-.289.464-.701.464-1.229-.005-.518-.156-.919-.464-1.193h-.014.004zm-.451-2.119c.299-.251.444-.613.444-1.084 0-.526-.131-.902-.397-1.116-.264-.214-.646-.326-1.146-.326H9.727v2.898h3.001c.436.001.81-.127 1.099-.372z"}}]})(t)}function oe(t){return g({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M3 3h18v18H3V3zm16.525 13.707c-.131-.821-.666-1.511-2.252-2.155-.552-.259-1.165-.438-1.349-.854-.068-.248-.078-.382-.034-.529.113-.484.687-.629 1.137-.495.293.09.563.315.732.676.775-.507.775-.507 1.316-.844-.203-.314-.304-.451-.439-.586-.473-.528-1.103-.798-2.126-.775l-.528.067c-.507.124-.991.395-1.283.754-.855.968-.608 2.655.427 3.354 1.023.765 2.521.933 2.712 1.653.18.878-.652 1.159-1.475 1.058-.607-.136-.945-.439-1.316-1.002l-1.372.788c.157.359.337.517.607.832 1.305 1.316 4.568 1.249 5.153-.754.021-.067.18-.528.056-1.237l.034.049zm-6.737-5.434h-1.686c0 1.453-.007 2.898-.007 4.354 0 .924.047 1.772-.104 2.033-.247.517-.886.451-1.175.359-.297-.146-.448-.349-.623-.641-.047-.078-.082-.146-.095-.146l-1.368.844c.229.473.563.879.994 1.137.641.383 1.502.507 2.404.305.588-.17 1.095-.519 1.358-1.059.384-.697.302-1.553.299-2.509.008-1.541 0-3.083 0-4.635l.003-.042z"}}]})(t)}function ie(t){return g({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M18.5 9.51a4.22 4.22 0 0 1-1.91-1.34A5.77 5.77 0 0 0 12 6a4.72 4.72 0 0 0-5 4 3.23 3.23 0 0 1 3.5-1.49 4.32 4.32 0 0 1 1.91 1.35A5.77 5.77 0 0 0 17 12a4.72 4.72 0 0 0 5-4 3.2 3.2 0 0 1-3.5 1.51zm-13 4.98a4.22 4.22 0 0 1 1.91 1.34A5.77 5.77 0 0 0 12 18a4.72 4.72 0 0 0 5-4 3.23 3.23 0 0 1-3.5 1.49 4.32 4.32 0 0 1-1.91-1.35A5.8 5.8 0 0 0 7 12a4.72 4.72 0 0 0-5 4 3.2 3.2 0 0 1 3.5-1.51z"}}]})(t)}function de(t){return g({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M19.24 3H4.76A1.76 1.76 0 0 0 3 4.76v14.48A1.76 1.76 0 0 0 4.76 21h14.48A1.76 1.76 0 0 0 21 19.24V4.76A1.76 1.76 0 0 0 19.24 3zm-5.8 10h-2.25v6.44H9.4V13H7.15v-1.46h6.29zm5.8 5.28a1.71 1.71 0 0 1-.67.74 3 3 0 0 1-1 .39 5.81 5.81 0 0 1-1.2.12 7 7 0 0 1-1.23-.11 4.52 4.52 0 0 1-1-.33v-1.71l-.06-.06h.06v.07a3.41 3.41 0 0 0 1 .54 3.06 3.06 0 0 0 1.13.2 2.58 2.58 0 0 0 .6-.06 1.47 1.47 0 0 0 .42-.17.75.75 0 0 0 .25-.25.69.69 0 0 0-.06-.74 1.24 1.24 0 0 0-.35-.33 3.12 3.12 0 0 0-.53-.3l-.67-.28a3.57 3.57 0 0 1-1.37-1 2 2 0 0 1-.46-1.33 2.16 2.16 0 0 1 .24-1.06 2.09 2.09 0 0 1 .66-.71 2.88 2.88 0 0 1 1-.42 5.11 5.11 0 0 1 1.19-.13 7 7 0 0 1 1.09.07 4.53 4.53 0 0 1 .88.23v1.65a2.42 2.42 0 0 0-.42-.24 3.58 3.58 0 0 0-.49-.17 3 3 0 0 0-.49-.1 2.45 2.45 0 0 0-.46 0 2.29 2.29 0 0 0-.56.06 1.54 1.54 0 0 0-.43.16.78.78 0 0 0-.26.25.63.63 0 0 0-.09.33.62.62 0 0 0 .1.35 1.19 1.19 0 0 0 .3.29 2.15 2.15 0 0 0 .46.28l.63.28a6.56 6.56 0 0 1 .84.42 2.65 2.65 0 0 1 .64.49 1.79 1.79 0 0 1 .42.63 2.48 2.48 0 0 1 .14.85 2.68 2.68 0 0 1-.25 1.08z"}}]})(t)}const ee=()=>{const[t,l]=c.useState([]),s=y(I),a=y(z),n=A(),f=o=>{l(o?t:[])},p=o=>{const r=o.currentTarget.value;n(S(r))};return c.useLayoutEffect(()=>{(async()=>{const i=(await X(s,a)).data;let m=i.filter((u,x)=>x<5).map(u=>({value:u.title,label:e.jsx("div",{style:{display:"flex",justifyContent:"space-between"},children:e.jsx(v,{to:`/post/${u._id}`,onClick:()=>{n(S("")),n(O([]))},children:e.jsxs("span",{children:["Found ",s," on ",u.title]})})})}));i.length>4&&(m=[...m,{value:"",label:e.jsxs(v,{to:"/search",children:["Xem toàn bộ ",i.length," kết quả"]})}]),l(m)})()},[n,s,a]),e.jsx(W,{options:t,onSearch:f,children:e.jsx(R.Search,{size:"middle",value:s,onChange:p,placeholder:"Tên bài viết",className:"bg-white rounded-lg"})})},me=({open:t,gotoButton:l})=>{const[s,a]=c.useState(!1),[n,f]=c.useState([]),p=y(z),o=A(),r=d=>{o(O(d))},i={mode:"multiple",allowClear:!0,autoClearSearchValue:!0,style:{width:"100%",color:"black"},value:p,options:n,onChange:d=>{r(d)},placeholder:"Chọn các tag bạn muốn tìm ",maxTagCount:"responsive"};return c.useEffect(()=>{async function d(){const u=(await q()).data.map(x=>({label:x,value:x}));f(u)}d()},[]),!t&&!s?e.jsx("div",{className:"flex justify-center pt-8",children:e.jsxs("button",{className:"flex items-center justify-between gap-2 button-normal w-60 animate-flyUp",onClick:()=>a(!0),children:["Tìm kiếm",e.jsx(Z,{})]})}):e.jsx("div",{className:"container mt-8 rounded-lg text-normal max-w-[800px] transition-all",children:e.jsxs("div",{className:"relative p-4 bg-white border border-gray-300 rounded-lg dark:border-gray-600 dark:bg-gray-800 text-normal animate-flyDown",children:[e.jsxs("div",{children:[e.jsx("p",{className:"mb-2 text-lg font-semibold text-center text-normal",children:"Tìm kiếm bài viết"}),!t&&e.jsx(V,{placement:"top",title:"Ẩn thanh tìm kiếm",className:"absolute right-2 top-2",children:e.jsx("button",{className:"p-1 button-normal",onClick:()=>a(!1),children:e.jsx(K,{})})})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx(F,{direction:"vertical",style:{width:"100%"},children:e.jsx(j,{...i,size:"middle"})}),e.jsx(ee,{})]}),l&&e.jsx("div",{className:"flex justify-center",children:e.jsx(v,{to:"/search",children:e.jsx("button",{className:"mx-auto mt-2 button-normal",children:"Đến trang tìm kiếm"})})})]})})};export{oe as B,re as P,me as S,de as a,ie as b,ce as c};
