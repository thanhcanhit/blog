import{m as l,u as g,a as P,b as j,c as C,r as p,j as s,S as b,d as E}from"./index-17386793.js";import{F as S}from"./index-1306a728.js";import{g as y,u as F}from"./postRequest-8c754513.js";import{P as v}from"./index-34133c4d.js";import"./tagRequest-5dd9008d.js";const W=()=>{const[a,d]=l.useMessage(),{postId:i}=g(),t=P(j),u=C(),[c,m]=p.useState();if(p.useEffect(()=>{(async()=>{const e=await y(i||"");e&&m(e.data.post)})()},[i]),!c)return s.jsx("div",{className:"grid items-center pt-4",children:s.jsx(b,{})});if(!t||!t.isAdmin)return s.jsx(S,{});const f=E(t,u),x=async(n,e,h)=>{const o={_id:i,...n,content:e,tags:h,user_id:t._id};Object.keys(o).forEach(r=>{o[r]||delete o[r]});try{await F(o,t.accessToken,f)?a.success("Cập nhật bài viết thành công"):a.error("Cập nhật bài viết thất bại")}catch{a.success("Có lỗi xảy ra")}};return s.jsxs(s.Fragment,{children:[d,s.jsx(v,{onFinish:x,post:c})]})};export{W as default};
