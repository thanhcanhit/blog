import{a as P,b as j,c as T,e as y,r,j as t,d as h,f as k,B as m}from"./index-17386793.js";import{F as D}from"./index-1306a728.js";import{a as C,f as S,r as X}from"./postRequest-8c754513.js";import{P as R}from"./index-e3e5ad67.js";import{P as w}from"./index-bd0ccd3f.js";import"./index-7dcf87ce.js";import"./tagRequest-5dd9008d.js";import"./Pagination-ad58d8ed.js";const A=()=>{const e=P(j),o=T(),[a,p]=y(),[x,g]=r.useState([]),[c,f]=r.useState(!1),d=()=>{f(!c)};if(r.useEffect(()=>{if(!(e!=null&&e._id))return;(async()=>{const s=h(e,o),i=await C(e._id,e.accessToken,s);i!=null&&i.data&&g(i.data)})()},[o,e,c]),!e)return t.jsx(D,{message:"Vui lòng đăng nhập để sử dụng tính năng này"});const l=h(e,o),u=async n=>{await S(n,e.accessToken,l)?(a.success(`Đã xóa vĩnh viễn ${n}`),d()):a.error("Xóa bài viết thất bại")},v=async n=>{const s=await X(n,e.accessToken,l);console.log(s),s?(a.success(`Đã xóa khôi phục bài viết ${n}`),d()):a.error("Khôi phục bài viết thất bại")},b={title:"Hành động",dataIndex:"actions",key:"actions",render:(n,s)=>t.jsxs(k,{size:"middle",children:[t.jsx(m,{type:"primary",onClick:()=>v(s._id),children:"Khôi phục"}),t.jsx(w,{title:"Xóa bài viết",description:"Bạn có muốn xóa bài viết này? (Xóa vĩnh viễn)",okText:"Xóa",cancelText:"Không",onConfirm:()=>{u(s._id)},children:t.jsx(m,{danger:!0,children:"Xóa vĩnh viễn"})})]})};return t.jsxs(t.Fragment,{children:[p,t.jsx(R,{title:"Danh sách bài viết bạn đã xóa",posts:x,actions:b})]})};export{A as default};
